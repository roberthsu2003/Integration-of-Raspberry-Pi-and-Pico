# Mosquitto MQTT Broker 配置檔
# 用於物聯網裝置通訊

# ============================================================================
# 網路設定
# ============================================================================

# 監聽連接埠
listener 1883

# 綁定位址（0.0.0.0 表示接受所有網路介面的連接）
bind_address 0.0.0.0

# 允許匿名連接（開發環境使用，生產環境應該關閉）
allow_anonymous true

# ============================================================================
# 持久化設定
# ============================================================================

# 持久化資料儲存位置
persistence true
persistence_location /mosquitto/data/

# 持久化檔案名稱
persistence_file mosquitto.db

# 自動儲存間隔（秒）
autosave_interval 300

# ============================================================================
# 日誌設定
# ============================================================================

# 日誌目的地
log_dest file /mosquitto/log/mosquitto.log
log_dest stdout

# 日誌類型
log_type error
log_type warning
log_type notice
log_type information

# 時間戳記格式
log_timestamp true
log_timestamp_format %Y-%m-%d %H:%M:%S

# ============================================================================
# 連接設定
# ============================================================================

# 最大客戶端連接數（0 表示無限制）
max_connections -1

# 客戶端連接逾時（秒）
# 如果客戶端在此時間內沒有發送任何訊息，連接將被關閉
keepalive_interval 60

# ============================================================================
# 訊息設定
# ============================================================================

# 最大訊息大小（位元組）
message_size_limit 0

# 佇列訊息數量限制
max_queued_messages 1000

# ============================================================================
# 安全設定（選用）
# ============================================================================

# 如果要啟用密碼驗證，取消以下註解並設定密碼檔
# password_file /mosquitto/config/passwd
# allow_anonymous false

# 如果要啟用 TLS/SSL，取消以下註解並設定憑證
# listener 8883
# cafile /mosquitto/config/ca.crt
# certfile /mosquitto/config/server.crt
# keyfile /mosquitto/config/server.key

# ============================================================================
# WebSocket 支援（選用）
# ============================================================================

# 如果需要 WebSocket 支援，取消以下註解
# listener 9001
# protocol websockets
